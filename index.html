function createQRBox(data) {
  const name = data["الاسم"] || "";
  const image = data["الصورة"] || "";

  // جمع كل المعلومات لإدخالها في QR
  const info = `
الاسم: ${data["الاسم"] || ""}
نوع الخط: ${data["نوع الخط"] || ""}
اسم الشركة: ${data["اسم الشركة"] || ""}
العمر: ${data["العمر"] || ""}
نوع الفحص: ${data["نوع الفحص"] || ""}
تأريخ الفحص: ${data["تأريخ الفحص"] || ""}
تأريخ تدريب السلامة: ${data["تأريخ تدريب السلامة"] || ""}
نوع العمل: ${data["نوع العمل"] || ""}
رقم القفل: ${data["رقم القفل"] || ""}
تأريخ الانتهاء: ${fixedExpireDate}
`.trim();

  const box = document.createElement('div');
  box.className = 'qr-box';

  const title = document.createElement('h3');
  title.textContent = name;
  box.appendChild(title);

  const row = document.createElement('div');
  row.className = 'image-qr-row';

  if (image) {
    const img = document.createElement('img');
    img.src = image;
    row.appendChild(img);
  }

  const canvas = document.createElement('canvas');
  row.appendChild(canvas);
  box.appendChild(row);

  document.getElementById('qr-container').appendChild(box);

  QRCode.toCanvas(canvas, info, function (error) {
    if (error) console.error("خطأ في توليد QR:", error);
  });
}
